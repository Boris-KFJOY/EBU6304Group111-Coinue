<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<AnchorPane prefHeight="600.0" prefWidth="800.0" style="-fx-background-color: #e6f0fa;"
            xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.coinue.controller.UserPageController">
    <VBox spacing="20.0" AnchorPane.topAnchor="0.0" AnchorPane.leftAnchor="0.0" 
          AnchorPane.rightAnchor="0.0" AnchorPane.bottomAnchor="0.0">
        
        <!-- 顶部导航栏 -->
        <HBox style="-fx-background-color: #B0C4DE;" HBox.hgrow="ALWAYS">
            <Button text="Homepage" onAction="#handleHomeNav" 
                    style="-fx-background-color: transparent; -fx-font-size: 14px;" 
                    maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
            <Button text="Analysis" onAction="#handleAnalysisNav" 
                    style="-fx-background-color: transparent; -fx-font-size: 14px;" 
                    maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
            <Button text="User" onAction="#handleUserNav" 
                    style="-fx-background-color: transparent; -fx-font-size: 14px;" 
                    maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
        </HBox>

        <!-- 用户信息区域 -->
        <HBox alignment="CENTER_RIGHT" style="-fx-padding: 10 20;">
            <VBox alignment="CENTER_RIGHT">
                <Label fx:id="usernameLabel" style="-fx-text-fill: #666666; -fx-font-size: 14px;"/>
                <Label fx:id="emailLabel" style="-fx-text-fill: #666666; -fx-font-size: 12px;"/>
            </VBox>
            <StackPane>
                <Circle radius="20" style="-fx-fill: #CCCCCC;"/>
                <ImageView fx:id="avatarImage" fitHeight="40" fitWidth="40" preserveRatio="true" 
                          onMouseClicked="#handleChangeAvatar" 
                          style="-fx-cursor: hand;"/>
            </StackPane>
        </HBox>

        <!-- 页面标题
        <Label fx:id="titleLabel" text="User Dashboard" style="-fx-font-size: 18px; -fx-text-fill: #333333; -fx-padding: 10 0 10 20;"/>
         -->
        <!-- 功能区域标签 -->
        <HBox style="-fx-background-color: #A9A9A9;">
            <Button text="Synchronisation" onAction="#handleSyncNav" 
                    style="-fx-background-color: #A9A9A9; -fx-text-fill: white;" 
                    maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
            <Button text="Sharing" onAction="#handleSharingNav" 
                    style="-fx-background-color: #A9A9A9; -fx-text-fill: white;" 
                    maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
            <Button text="Encryption" onAction="#handleEncryptionNav" 
                    style="-fx-background-color: #A9A9A9; -fx-text-fill: white;" 
                    maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
        </HBox>

        <!-- 其他功能按钮 -->
        <VBox spacing="20" style="-fx-padding: 20;">
            <Button text="Change Password" onAction="#handleChangePassword" 
                    style="-fx-background-color: white; -fx-border-color: #3498db; 
                           -fx-border-radius: 5; -fx-background-radius: 5;"/>
            <Button text="Bill Payment" onAction="#handleBillPayment"
                    style="-fx-background-color: white; -fx-border-color: #3498db; 
                           -fx-border-radius: 5; -fx-background-radius: 5;"/>
            <Button text="Export Data" onAction="#handleExportData"
                    style="-fx-background-color: white; -fx-border-color: #3498db; 
                           -fx-border-radius: 5; -fx-background-radius: 5;"/>
            <Button text="Logout" onAction="#handleLogout"
                    style="-fx-background-color: white; -fx-border-color: #3498db; 
                           -fx-border-radius: 5; -fx-background-radius: 5;"/>
            <Pane fx:id="chartContainer" prefHeight="200" prefWidth="760" 
                  style="-fx-background-color: white; -fx-border-color: #3498db; -fx-border-radius: 5; -fx-background-radius: 5; -fx-z-index: 100;" 
                  visible="true" managed="true">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
        </Pane>
            <TableView fx:id="paymentTable" prefHeight="200" prefWidth="760"
                      style="-fx-background-color: white; -fx-border-color: #3498db;">
                <columns>
                    <TableColumn text="Date" prefWidth="150"/>
                    <TableColumn text="Amount" prefWidth="150"/>
                    <TableColumn text="Description" prefWidth="460"/>
                </columns>
            </TableView>
            <Button fx:id="importButton" text="Import Bill" onAction="#handleImportBill"
                    style="-fx-background-color: white; -fx-border-color: #3498db; 
                           -fx-border-radius: 5; -fx-background-radius: 5;"/>
        </VBox>
    </VBox>
</AnchorPane>