<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.image.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.coinue.controller.BillPaymentPageController"
      spacing="10"
      prefWidth="800"
      prefHeight="600"
      style="-fx-background-color: linear-gradient(to right, #ffffff,rgb(192, 213, 255) 75%, #ffffff);">

    <!-- Top Navigation -->
    <HBox alignment="CENTER" spacing="0" style="-fx-background-color: #B0E0FF;" VBox.vgrow="NEVER">
        <Button text="Homepage" style="-fx-background-color: transparent; -fx-min-width: 33.33%;" onAction="#handleHomeNav" maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
        <Button text="Analysis" style="-fx-background-color: rgba(255,255,255,0.3); -fx-min-width: 33.33%; -fx-font-weight: bold;" onAction="#handleAnalysisNav" maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
        <Button text="User" style="-fx-background-color: transparent; -fx-min-width: 33.33%;" onAction="#handleUserNav" maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
    </HBox>

    <!-- Main Content -->
    <VBox spacing="20.0" VBox.vgrow="ALWAYS">
        <padding>
            <Insets top="20.0" left="20.0" right="20.0" bottom="20.0"/>
        </padding>

        <!-- È°µÈù¢Ê†áÈ¢òÂíåÊ¶ÇËßà‰ø°ÊÅØ -->
        <VBox spacing="15" style="-fx-background-color: white; -fx-background-radius: 10px; -fx-padding: 20px; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5);">
            <Label text="Bill Payment Management" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
            
            <HBox spacing="20" alignment="CENTER_LEFT">
                <VBox spacing="5" style="-fx-background-color: #E8F5E8; -fx-background-radius: 8px; -fx-padding: 15px;" HBox.hgrow="ALWAYS">
                    <Label text="Total Amount Due" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
                    <Label fx:id="repaymentAmountLabel" text="¬•0.00" style="-fx-font-size: 16px; -fx-text-fill: #4CAF50; -fx-font-weight: bold;"/>
                </VBox>
                
                <VBox spacing="5" style="-fx-background-color: #FFF3E0; -fx-background-radius: 8px; -fx-padding: 15px;" HBox.hgrow="ALWAYS">
                    <Label text="Credit Limit" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
                    <TextField fx:id="creditLimitField" promptText="Enter amount" 
                              style="-fx-background-color: #F5F5F5; -fx-border-color: #E0E0E0; -fx-border-radius: 5px; -fx-background-radius: 5px; -fx-padding: 5px;"/>
                </VBox>
                
                <VBox spacing="5" style="-fx-background-color: #E3F2FD; -fx-background-radius: 8px; -fx-padding: 15px;" HBox.hgrow="ALWAYS">
                    <Label text="Filter by Date" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
                    <DatePicker fx:id="dateFilterPicker" promptText="Select date" 
                               style="-fx-background-color: #F5F5F5; -fx-border-color: #E0E0E0; -fx-border-radius: 5px; -fx-background-radius: 5px;"/>
                </VBox>
            </HBox>
        </VBox>

        <!-- Áî®Êà∑Áä∂ÊÄÅÊòæÁ§∫Âå∫Âüü -->
        <VBox spacing="5" style="-fx-background-color: #F8F9FA; -fx-background-radius: 8px; -fx-padding: 12px;">
            <Label text="Áî®Êà∑Êï∞ÊçÆÁä∂ÊÄÅ:" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #495057;"/>
            <Label fx:id="userDataStatusLabel" text="Ê≠£Âú®Âä†ËΩΩ..." style="-fx-font-size: 12px; -fx-text-fill: #6C757D;"/>
        </VBox>

        <!-- Êìç‰ΩúÊåâÈíÆÂå∫Âüü -->
        <HBox spacing="15" alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-background-radius: 10px; -fx-padding: 15px; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5);">
            <Label text="Actions:" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
            <Button text="üìÑ Import CSV" onAction="#handleImportCSV" 
                    style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-background-radius: 5px; -fx-padding: 10px 20px; -fx-font-size: 14px;"
                    HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
            <Button fx:id="clearDataButton" text="üóëÔ∏è Clear Data" 
                    style="-fx-background-color: #DC3545; -fx-text-fill: white; -fx-background-radius: 5px; -fx-padding: 10px 20px; -fx-font-size: 14px;"
                    HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
            <Button text="üí≥ Pay Bills" 
                    style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-background-radius: 5px; -fx-padding: 10px 20px; -fx-font-size: 14px;"
                    HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
            <Button text="üìä Generate Report" 
                    style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-background-radius: 5px; -fx-padding: 10px 20px; -fx-font-size: 14px;"
                    HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
        </HBox>

        <!-- ÂõæË°®ÂíåË°®Ê†ºÂå∫Âüü -->
        <HBox spacing="20.0" VBox.vgrow="ALWAYS">
            <!-- Â∑¶‰æßÈ•ºÂõæÂå∫Âüü -->
            <VBox spacing="15" style="-fx-background-color: white; -fx-background-radius: 10px; -fx-padding: 20px; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5);" HBox.hgrow="ALWAYS">
                <Label text="Repayment Overview" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
                <PieChart fx:id="repaymentChart" title="Credit Usage" 
                         legendVisible="true" 
                         labelsVisible="true"
                         animated="true"
                         minHeight="200"
                         prefHeight="300"
                         VBox.vgrow="ALWAYS"/>
            </VBox>
            
            <!-- Âè≥‰æßË°®Ê†ºÂå∫Âüü -->
            <VBox spacing="15" style="-fx-background-color: white; -fx-background-radius: 10px; -fx-padding: 20px; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5);" HBox.hgrow="ALWAYS">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="Bill Details" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333333;" HBox.hgrow="ALWAYS"/>
                    <Button text="+ Add Bill" 
                            style="-fx-background-color: #9C27B0; -fx-text-fill: white; -fx-background-radius: 5px; -fx-padding: 5px 10px; -fx-font-size: 12px;"/>
                </HBox>
                
                <TableView fx:id="billTable" VBox.vgrow="ALWAYS"
                          style="-fx-background-color: transparent;">
                    <columns>
                        <TableColumn prefWidth="100" text="Date" fx:id="dateColumn"
                                    style="-fx-alignment: CENTER;"/>
                        <TableColumn prefWidth="140" text="Description" fx:id="descriptionColumn"
                                    style="-fx-alignment: CENTER-LEFT;"/>
                        <TableColumn prefWidth="100" text="Amount" fx:id="amountColumn"
                                    style="-fx-alignment: CENTER-RIGHT;"/>
                        <TableColumn prefWidth="80" text="Status" fx:id="statusColumn"
                                    style="-fx-alignment: CENTER;"/>
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                    <style>
                        /* Ë°®Â§¥Ê†∑Âºè */
                        -fx-table-header-background: #F5F5F5;
                        -fx-table-header-border-color: #E0E0E0;
                        
                        /* ÂçïÂÖÉÊ†ºÊ†∑Âºè */
                        -fx-table-cell-border-color: #F0F0F0;
                        
                        /* ÈÄâ‰∏≠Ë°åÊ†∑Âºè */
                        -fx-selection-bar: #E3F2FD;
                        -fx-selection-bar-non-focused: #F5F5F5;
                    </style>
                </TableView>
            </VBox>
        </HBox>
    </VBox>
</VBox>